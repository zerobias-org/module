{
  "name": "analyze-api",
  "description": "Analyze vendor API, create entity map, identify operations (no code generation)",
  "usage": "/analyze-api <vendor> <product>",

  "arguments": [
    {
      "name": "vendor",
      "description": "Vendor/company name",
      "required": true,
      "type": "string",
      "examples": [
        "github",
        "amazon",
        "avigilon",
        "slack"
      ]
    },
    {
      "name": "product",
      "description": "Product/API name to analyze",
      "required": true,
      "type": "string",
      "examples": [
        "webhooks",
        "s3",
        "alta",
        "api"
      ]
    }
  ],

  "workflow": {
    "file": "claude/orchestration/workflow-templates/analyze-api-workflow.md",
    "name": "Analyze API Workflow",
    "summary": "Research and document API structure without code generation",
    "duration": "30-60 minutes",
    "phases": [
      "Phase 1: Identify Product/Vendor",
      "Phase 2: Find API Documentation",
      "Phase 3: Identify All Resources/Entities",
      "Phase 4: Map Entity Relationships",
      "Phase 5: Create Entity List",
      "Phase 6: Design ERD Structure",
      "Phase 7: Create Mermaid Diagram",
      "Phase 8: Validate Completeness",
      "Phase 9: Save as external-api.mmd"
    ],
    "gates": "None (analysis only, no code)",
    "note": "This is a SEPARATE workflow from the three shown in the diagram"
  },

  "agents": [
    "@product-specialist",
    "@api-researcher",
    "@operation-analyst",
    "@schema-specialist",
    "@documentation-writer"
  ],

  "execution": {
    "entrypoint": "orchestrate_analyze_api",
    "validates": "Completeness of analysis",
    "outputs": [
      "Product understanding documented",
      "All resources/entities identified",
      "Entity relationships mapped",
      "Mermaid ERD diagram created",
      "Saved to external-api.mmd"
    ],
    "no_code_generation": true
  },

  "deliverables": {
    "entity_map": "Complete list of all resources/entities",
    "relationship_diagram": "Mermaid ERD showing entity relationships",
    "operation_coverage": "List of all available API operations per entity",
    "documentation": "Saved to .claude/.localmemory/analyze-{vendor}-{product}/external-api.mmd"
  },

  "prerequisites": {
    "api_documentation_accessible": true,
    "no_credentials_needed": "Analysis only, no API calls"
  },

  "examples": [
    {
      "command": "/analyze-api github webhooks",
      "description": "Analyze GitHub webhooks API structure",
      "output": "external-api.mmd with Webhook entity and relationships"
    },
    {
      "command": "/analyze-api amazon s3",
      "description": "Analyze AWS S3 API structure",
      "output": "external-api.mmd with Bucket, Object, etc."
    },
    {
      "command": "/analyze-api avigilon alta",
      "description": "Analyze Avigilon Alta API structure",
      "output": "external-api.mmd with Door, User, AccessLevel, etc."
    }
  ],

  "output_format": {
    "mermaid_erd": "Entity Relationship Diagram in Mermaid format",
    "example": "```mermaid\nerDiagram\n  Webhook ||--o{ WebhookConfig : has\n  Webhook {\n    string id\n    string name\n    boolean active\n  }\n```"
  },

  "analysis_scope": [
    "Identify all API resources/entities",
    "Map relationships between entities",
    "List available operations per entity",
    "Document authentication requirements",
    "Note pagination patterns",
    "Identify special requirements"
  ],

  "use_cases": [
    "Before creating module - understand full API scope",
    "Planning multiple modules from same vendor",
    "Documentation for stakeholders",
    "Identifying MVP vs full implementation scope"
  ],

  "success_criteria": [
    "All entities identified",
    "Relationships mapped correctly",
    "Mermaid diagram validates (renders correctly)",
    "Documentation comprehensive",
    "Saved to external-api.mmd"
  ],

  "note": "This command does NOT create code or modules. Use /create-module afterward to implement."
}
